<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Professional Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    
    .calculator-button {
      transition: all 0.2s ease;
    }
    
    .calculator-button:active {
      transform: scale(0.95);
    }
    
    .payment-overlay {
      backdrop-filter: blur(8px);
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
    
    .payment-card {
      animation: slideUp 0.3s ease;
    }
    
    @keyframes slideUp {
      from {
        transform: translateY(20px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <main class="w-full h-full overflow-auto">
   <div class="min-h-full flex items-center justify-center p-6" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"><!-- Calculator Card -->
    <div id="calculatorCard" class="w-full max-w-md">
     <div class="bg-white rounded-3xl shadow-2xl p-8"><!-- Header -->
      <div class="text-center mb-8">
       <h1 id="mainHeadline" class="text-4xl font-bold mb-2" style="color: #667eea;">Simplify Your Life</h1>
       <p id="subHeadline" class="text-gray-600 text-lg">Solve answers with precision</p>
      </div><!-- Display -->
      <div class="mb-6">
       <div class="bg-gray-50 rounded-2xl p-6 min-h-[80px] flex items-center justify-end border-2 border-gray-100"><input type="text" id="display" readonly class="text-right text-3xl font-light w-full bg-transparent outline-none text-gray-800" value="0" aria-label="Calculator display">
       </div>
      </div><!-- Calculator Buttons -->
      <div class="grid grid-cols-4 gap-3 mb-6"><!-- Row 1 --> <button type="button" class="calculator-button bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-4 rounded-xl text-xl" data-action="clear">C</button> <button type="button" class="calculator-button bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-4 rounded-xl text-xl" data-value="/">/</button> <button type="button" class="calculator-button bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-4 rounded-xl text-xl" data-value="*">√ó</button> <button type="button" class="calculator-button bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-4 rounded-xl text-xl" data-action="backspace">‚Üê</button> <!-- Row 2 --> <button type="button" class="calculator-button bg-white hover:bg-gray-50 border-2 border-gray-100 text-gray-800 font-semibold py-4 rounded-xl text-xl" data-value="7">7</button> <button type="button" class="calculator-button bg-white hover:bg-gray-50 border-2 border-gray-100 text-gray-800 font-semibold py-4 rounded-xl text-xl" data-value="8">8</button> <button type="button" class="calculator-button bg-white hover:bg-gray-50 border-2 border-gray-100 text-gray-800 font-semibold py-4 rounded-xl text-xl" data-value="9">9</button> <button type="button" class="calculator-button bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-4 rounded-xl text-xl" data-value="-">‚àí</button> <!-- Row 3 --> <button type="button" class="calculator-button bg-white hover:bg-gray-50 border-2 border-gray-100 text-gray-800 font-semibold py-4 rounded-xl text-xl" data-value="4">4</button> <button type="button" class="calculator-button bg-white hover:bg-gray-50 border-2 border-gray-100 text-gray-800 font-semibold py-4 rounded-xl text-xl" data-value="5">5</button> <button type="button" class="calculator-button bg-white hover:bg-gray-50 border-2 border-gray-100 text-gray-800 font-semibold py-4 rounded-xl text-xl" data-value="6">6</button> <button type="button" class="calculator-button bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-4 rounded-xl text-xl" data-value="+">+</button> <!-- Row 4 --> <button type="button" class="calculator-button bg-white hover:bg-gray-50 border-2 border-gray-100 text-gray-800 font-semibold py-4 rounded-xl text-xl" data-value="1">1</button> <button type="button" class="calculator-button bg-white hover:bg-gray-50 border-2 border-gray-100 text-gray-800 font-semibold py-4 rounded-xl text-xl" data-value="2">2</button> <button type="button" class="calculator-button bg-white hover:bg-gray-50 border-2 border-gray-100 text-gray-800 font-semibold py-4 rounded-xl text-xl" data-value="3">3</button> <button type="button" class="calculator-button bg-white hover:bg-gray-50 border-2 border-gray-100 text-gray-800 font-semibold py-4 rounded-xl text-xl col-span-1 row-span-2" data-value="0">0</button> <!-- Row 5 --> <button type="button" class="calculator-button bg-white hover:bg-gray-50 border-2 border-gray-100 text-gray-800 font-semibold py-4 rounded-xl text-xl col-span-2" data-value=".">.</button>
      </div><!-- Enter Button --> <button type="button" id="enterButton" class="w-full py-4 rounded-xl text-white font-bold text-xl shadow-lg hover:shadow-xl transition-all" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"> Enter </button>
     </div>
    </div><!-- Payment Overlay -->
    <div id="paymentOverlay" class="payment-overlay fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-6" style="z-index: 1000;">
     <div class="payment-card bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full">
      <div class="text-center mb-6">
       <div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"><span class="text-3xl">üîí</span>
       </div>
       <h2 class="text-2xl font-bold text-gray-800 mb-2">Secure Calculation</h2>
       <p id="priceText" class="text-gray-600 text-lg">¬£10 per calculation</p>
      </div>
      <div class="bg-gray-50 rounded-xl p-4 mb-6">
       <div class="flex justify-between items-center mb-2"><span class="text-gray-600">Calculation:</span> <span id="calculationPreview" class="font-mono text-gray-800 font-semibold"></span>
       </div>
       <div class="flex justify-between items-center pt-2 border-t border-gray-200"><span class="text-gray-800 font-semibold">Total:</span> <span class="text-2xl font-bold" style="color: #667eea;">¬£10</span>
       </div>
      </div>
      <p class="text-sm text-gray-500 text-center mb-6">Click below to proceed to secure checkout</p>
      <div class="space-y-3"><button type="button" id="checkoutButton" class="w-full py-4 rounded-xl text-white font-bold text-lg shadow-lg hover:shadow-xl transition-all" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"> Proceed to Checkout </button> <button type="button" id="cancelButton" class="w-full py-3 rounded-xl text-gray-600 font-semibold border-2 border-gray-200 hover:bg-gray-50 transition-all"> Cancel </button>
      </div>
     </div>
    </div>
   </div>
  </main>
  <script>
    const defaultConfig = {
      main_headline: "Simplify Your Life",
      sub_headline: "Solve answers with precision",
      price_text: "¬£10 per calculation",
      button_text: "Enter",
      background_gradient_start: "#667eea",
      background_gradient_end: "#764ba2",
      card_background: "#ffffff",
      primary_color: "#667eea",
      text_color: "#1f2937",
      font_family: "system-ui, -apple-system, sans-serif",
      font_size: 16
    };

    function appendToDisplay(value) {
      const display = document.getElementById('display');
      if (display.value === '0') {
        display.value = value;
      } else {
        display.value += value;
      }
    }

    function clearDisplay() {
      document.getElementById('display').value = '0';
    }

    function backspace() {
      const display = document.getElementById('display');
      if (display.value.length > 1) {
        display.value = display.value.slice(0, -1);
      } else {
        display.value = '0';
      }
    }

    function showPayment() {
      const display = document.getElementById('display');
      const calculation = display.value;
      
      document.getElementById('calculationPreview').textContent = calculation;
      document.getElementById('paymentOverlay').classList.remove('hidden');
      document.getElementById('paymentOverlay').classList.add('flex');
    }

    function closePayment() {
      document.getElementById('paymentOverlay').classList.add('hidden');
      document.getElementById('paymentOverlay').classList.remove('flex');
    }

    function proceedToCheckout() {
      const calculation = document.getElementById('calculationPreview').textContent;
      
      const overlay = document.getElementById('paymentOverlay');
      const card = overlay.querySelector('.payment-card');
      card.innerHTML = `
        <div class="text-center">
          <div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center bg-green-100">
            <span class="text-3xl">‚úì</span>
          </div>
          <h2 class="text-2xl font-bold text-gray-800 mb-2">Ready for Checkout</h2>
          <p class="text-gray-600 mb-6">Connect this to your secure payment system to process the ¬£10 payment for calculation: ${calculation}</p>
          <button type="button" class="w-full py-3 rounded-xl text-white font-bold" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);" onclick="closePayment()">
            Close
          </button>
        </div>
      `;
    }

    // Set up event listeners
    document.addEventListener('DOMContentLoaded', function() {
      // Calculator button clicks
      document.querySelectorAll('[data-value]').forEach(button => {
        button.addEventListener('click', function() {
          appendToDisplay(this.getAttribute('data-value'));
        });
      });

      document.querySelectorAll('[data-action="clear"]').forEach(button => {
        button.addEventListener('click', clearDisplay);
      });

      document.querySelectorAll('[data-action="backspace"]').forEach(button => {
        button.addEventListener('click', backspace);
      });

      // Enter button
      document.getElementById('enterButton').addEventListener('click', showPayment);

      // Payment overlay buttons
      document.getElementById('checkoutButton').addEventListener('click', proceedToCheckout);
      document.getElementById('cancelButton').addEventListener('click', closePayment);
    });

    async function onConfigChange(config) {
      const baseSize = config.font_size || defaultConfig.font_size;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseFontStack = 'system-ui, -apple-system, sans-serif';
      
      // Update text content
      document.getElementById('mainHeadline').textContent = config.main_headline || defaultConfig.main_headline;
      document.getElementById('subHeadline').textContent = config.sub_headline || defaultConfig.sub_headline;
      document.getElementById('priceText').textContent = config.price_text || defaultConfig.price_text;
      document.getElementById('enterButton').textContent = config.button_text || defaultConfig.button_text;
      
      // Update colors
      const bgStart = config.background_gradient_start || defaultConfig.background_gradient_start;
      const bgEnd = config.background_gradient_end || defaultConfig.background_gradient_end;
      const primaryColor = config.primary_color || defaultConfig.primary_color;
      const textColor = config.text_color || defaultConfig.text_color;
      
      document.querySelector('main > div').style.background = `linear-gradient(135deg, ${bgStart} 0%, ${bgEnd} 100%)`;
      document.getElementById('mainHeadline').style.color = primaryColor;
      document.getElementById('enterButton').style.background = `linear-gradient(135deg, ${bgStart} 0%, ${bgEnd} 100%)`;
      
      // Update fonts
      document.getElementById('mainHeadline').style.fontFamily = `${customFont}, ${baseFontStack}`;
      document.getElementById('mainHeadline').style.fontSize = `${baseSize * 2.5}px`;
      document.getElementById('subHeadline').style.fontFamily = `${customFont}, ${baseFontStack}`;
      document.getElementById('subHeadline').style.fontSize = `${baseSize * 1.125}px`;
      document.getElementById('priceText').style.fontSize = `${baseSize * 1.125}px`;
      document.getElementById('enterButton').style.fontSize = `${baseSize * 1.25}px`;
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_gradient_start || defaultConfig.background_gradient_start,
              set: (value) => {
                config.background_gradient_start = value;
                window.elementSdk.setConfig({ background_gradient_start: value });
              }
            },
            {
              get: () => config.background_gradient_end || defaultConfig.background_gradient_end,
              set: (value) => {
                config.background_gradient_end = value;
                window.elementSdk.setConfig({ background_gradient_end: value });
              }
            },
            {
              get: () => config.primary_color || defaultConfig.primary_color,
              set: (value) => {
                config.primary_color = value;
                window.elementSdk.setConfig({ primary_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.card_background || defaultConfig.card_background,
              set: (value) => {
                config.card_background = value;
                window.elementSdk.setConfig({ card_background: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ["main_headline", config.main_headline || defaultConfig.main_headline],
          ["sub_headline", config.sub_headline || defaultConfig.sub_headline],
          ["price_text", config.price_text || defaultConfig.price_text],
          ["button_text", config.button_text || defaultConfig.button_text]
        ])
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9af992930606bec8',t:'MTc2NjAwNzU2MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
